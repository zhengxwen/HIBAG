#################################################################
###                           HIBAG                           ###
###                                                           ###

# use C++11
CXX_STD = CXX11

# check GNU GCC
GCC_FLAG=$(shell $(CC) -dM -E - < /dev/null |grep -Eo '__GNUC__|__clang__|ICC' \
	|tr '\n' ' ' |grep GNUC |grep -v -e clang -e ICC)
LIB_GCC=$(if ${GCC_FLAG},-lgcc)


# additional preprocessor options
PKG_CXXFLAGS += -DRCPP_PARALLEL_USE_TBB=1 -fno-asynchronous-unwind-tables

# to set flags for the linker
PKG_LIBS = \
	$(shell "${R_HOME}/bin${R_ARCH_BIN}/Rscript.exe" -e "RcppParallel::RcppParallelLibs()") \
	${LIB_GCC}

all: $(SHLIB)

clean:
	rm -f ../.travis.yml
	rm -rf ../appveyor.yml
	rm -f ../.gitignore
